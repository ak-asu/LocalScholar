<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="color-scheme" content="light dark">
  <title>Quizzer</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <main>
    <header>
      <h1>Quizzer</h1>
      <p class="subtitle">Right-click any text → Quizzer</p>
      <div id="api-warning" class="api-warning" hidden>
        <span>⚠️ Translation API not available. <a href="#" id="enable-translation-link">Enable it</a></span>
      </div>
      <nav class="tabs" role="tablist">
        <button id="tab-history" class="tab active" role="tab" aria-selected="true" aria-controls="view-history">History</button>
        <button id="tab-settings" class="tab" role="tab" aria-selected="false" aria-controls="view-settings">Settings</button>
      </nav>
    </header>

    <!-- History View (Default) -->
    <section id="view-history" role="tabpanel" aria-labelledby="tab-history">
      <div class="history-section">
        <h2>Summaries</h2>
        <div id="summaries-list" class="item-list">
          <p class="empty-state">No summaries yet. Right-click text → Quizzer: Summarize</p>
        </div>
      </div>

      <div class="history-section">
        <h2>Flashcard Decks</h2>
        <div id="decks-list" class="item-list">
          <p class="empty-state">No decks yet. Right-click text → Quizzer: Create Flashcards</p>
        </div>
      </div>

      <div class="history-section">
        <h2>Reports</h2>
        <div class="queue-info">
          <span id="queue-count">0 items in queue</span>
          <button id="clear-queue-btn" type="button" class="btn-text">Clear</button>
        </div>
        <div id="reports-list" class="item-list">
          <p class="empty-state">No reports yet. Right-click → Add to Report Queue, then generate.</p>
        </div>
        <button id="generate-report-btn" type="button" class="btn-primary" disabled>Generate Report from Queue</button>
      </div>
    </section>

    <!-- Settings View -->
    <section id="view-settings" role="tabpanel" aria-labelledby="tab-settings" hidden>
      <div class="settings-group">
        <h2>Summarization</h2>
        <label for="sum-type">
          <span>Type</span>
          <select id="sum-type" name="sum-type">
            <option value="tldr">TL;DR</option>
            <option value="key-points" selected>Key Points</option>
            <option value="headline">Headline</option>
            <option value="teaser">Teaser</option>
          </select>
        </label>
        <label for="sum-length">
          <span>Length</span>
          <select id="sum-length" name="sum-length">
            <option value="short">Short</option>
            <option value="medium" selected>Medium</option>
            <option value="long">Long</option>
          </select>
        </label>
        <label for="sum-format">
          <span>Format</span>
          <select id="sum-format" name="sum-format">
            <option value="markdown" selected>Markdown</option>
            <option value="plain-text">Plain Text</option>
          </select>
        </label>
        <label for="output-language">
          <span>Output Language</span>
          <select id="output-language" name="output-language">
            <option value="en" selected>English</option>
            <option value="es">Spanish</option>
            <option value="ja">Japanese</option>
            <option value="fr">French</option>
            <option value="de">German</option>
          </select>
        </label>
      </div>

      <div class="settings-group">
        <h2>Flashcards</h2>
        <label for="fc-count">
          <span>Count</span>
          <select id="fc-count" name="fc-count">
            <option value="5" selected>5</option>
            <option value="10">10</option>
            <option value="15">15</option>
          </select>
        </label>
        <label for="fc-difficulty">
          <span>Difficulty</span>
          <select id="fc-difficulty" name="fc-difficulty">
            <option value="easy">Easy</option>
            <option value="medium" selected>Medium</option>
            <option value="hard">Hard</option>
          </select>
        </label>
        <label for="fc-language">
          <span>Output Language</span>
          <select id="fc-language" name="fc-language">
            <option value="en" selected>English</option>
            <option value="es">Spanish</option>
            <option value="ja">Japanese</option>
          </select>
        </label>
      </div>

      <div class="settings-group">
        <h2>Performance</h2>
        <label class="checkbox-label">
          <input type="checkbox" id="enable-caching" checked>
          <span>Enable Caching</span>
        </label>
        <label for="cache-expiration">
          <span>Cache Expiration</span>
          <select id="cache-expiration" name="cache-expiration">
            <option value="1">1 hour</option>
            <option value="24" selected>24 hours</option>
            <option value="168">7 days</option>
            <option value="0">Never</option>
          </select>
        </label>
        <label for="chunk-size">
          <span>Chunk Size</span>
          <select id="chunk-size" name="chunk-size">
            <option value="2000">2K chars</option>
            <option value="4000" selected>4K chars</option>
            <option value="6000">6K chars</option>
            <option value="8000">8K chars</option>
          </select>
        </label>
      </div>

      <div class="settings-group">
        <h2>Data Management</h2>
        <div class="btn-group">
          <button id="export-data" type="button" class="btn-secondary">Export Data</button>
          <button id="import-data" type="button" class="btn-secondary">Import Data</button>
          <input type="file" id="import-file" accept=".json" style="display: none;">
        </div>
        <div class="btn-group">
          <button id="clear-cache-btn" type="button" class="btn-secondary">Clear Cache</button>
          <button id="clear-all-data-btn" type="button" class="btn-danger">Clear All Data</button>
        </div>
      </div>

      <div id="status" class="status" role="status" aria-live="polite"></div>
    </section>
  </main>
  <script src="popup.js" type="module"></script>
</body>
</html>
